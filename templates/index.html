{% extends "basic.html" %}

{% block content %}
  {% for page in paginator.pages %}
    <section class="post animated fadeInDown">
      <div class="post-wrapper">
        <!-- 整个卡片可点击 -->
        <a href="{{ page.permalink }}" class="post-card">
          <div class="post-content-wrapper">
            <div class="post-title">
              <h3># {{ page.title }}</h3>
            </div>

            <div class="post-content">
              <p>
                {% if page.extra.summary %}
                  {{ page.extra.summary | safe | striptags }}
                {% else %}
                  {{ page.content | safe | striptags | truncate(length=150) }}
                {% endif %}
              </p>
            </div>

            <div class="post-footer">
              <div class="meta">
                <div class="info">
                  {% if page.date %}
                    <i class="far fa-sun"></i>
                    <i> Push time: {{ page.date | date(format="%Y-%m-%d %H:%M:%S") }}&nbsp;&nbsp;</i>
                  {% endif %}
                  {% if page.taxonomies.tags %}
                    <i class="fas fa-tags"></i>
                    {% for tag in page.taxonomies.tags %}
                      <span class="tag">{{ tag }}&nbsp;&nbsp;</span>
                    {% endfor %}
                  {% endif %}
                </div>
              </div>
            </div>
          </div>
        </a>
      </div>
    </section>
  {% endfor %}

  <div class="pagination">
    <ul class="clearfix">
      {% if paginator.next %}
        <li class="next pagbuttons">
          <a class="btn" role="navigation" href="{{ paginator.next }}" aria-label="{{ trans(key="next_page", lang=lang) }}">
            {{ trans(key="next_page", lang=lang) }}
          </a>
        </li>
      {% endif %}
      {% if paginator.previous %}
        <li class="pre pagbuttons">
          <a class="btn" role="navigation" href="{{ paginator.previous }}" aria-label="{{ trans(key="last_page", lang=lang) }}">
            {{ trans(key="last_page", lang=lang) }}
          </a>
        </li>
      {% endif %}
    </ul>
  </div>

  <style>
    .post-card {
      display: block;
      position: relative;
      width: 100%;
      text-decoration: none;
      color: inherit;
      padding: 1em;
      border-radius: 8px;
      transition: background 0.3s ease;
      z-index: 1; /* 确保在最上层 */
    }

    .post-card * {
      pointer-events: none; /* 避免子元素阻挡点击 */
    }

    .post-card:hover {
      background: #f9f9f9;
    }

    .post-title h3 {
      margin: 0 0 0.5em 0;
    }

    .post-content p {
      margin: 0 0 1em 0;
    }

    .tag {
      background: #f0f0f0;
      border-radius: 4px;
      padding: 0.2em 0.5em;
      font-size: 0.85em;
    }

    /* 移动端优化 */
    @media (max-width: 768px) {
      .post-card {
        padding: 0.8em;
      }
      .post-title h3 {
        font-size: 1.1em;
      }
      .post-content p {
        font-size: 0.9em;
        line-height: 1.4em;
      }
    }
  </style>
{% endblock content %}