{% extends "basic.html" %}

{% block content %}
  {% for page in paginator.pages %}
    <article class="post animated fadeInDown">
      <a href="{{ page.permalink }}" class="post-card-link" aria-label="Read more: {{ page.title }}">
        <div class="post-wrapper">
          <div class="post-content-wrapper">
            <!-- 标题 -->
            <header class="post-header">
              <h3 class="post-title">{{ page.title }}</h3>
            </header>

            <!-- 摘要 -->
            <div class="post-excerpt">
              <p>
                {% if page.extra.summary %}
                  {{ page.extra.summary | safe | striptags | truncate(length=150) }}
                {% else %}
                  {{ page.content | safe | striptags | truncate(length=150) }}
                {% endif %}
              </p>
            </div>

            <!-- 页脚信息 -->
            <footer class="post-footer">
              <div class="meta info">
                {% if page.date %}
                  <span class="meta-item">
                    <i class="far fa-sun" aria-hidden="true"></i>
                    <time datetime="{{ page.date | date(format="%Y-%m-%d") }}">
                      {{ page.date | date(format="%Y-%m-%d") }}
                    </time>
                  </span>&nbsp;&nbsp;
                {% endif %}

                {% if page.taxonomies.tags %}
                  <span class="meta-item tags">
                    <i class="fas fa-tags" aria-hidden="true"></i>
                    {% for tag in page.taxonomies.tags %}
                      <span class="tag">{{ tag }}</span>{% if not loop.last %}&nbsp;</span>
                    {% endfor %}
                  </span>
                {% endif %}
              </div>
            </footer>
          </div>
        </div>
      </a>
    </article>
  {% endfor %}

  <!-- 分页导航 -->
  <div class="pagination">
    <ul class="clearfix">
      {% if paginator.previous %}
        <li class="pre pagbuttons">
          <a class="btn" href="{{ paginator.previous }}" rel="prev" aria-label="{{ trans(key='last_page', lang=lang) }}">
            {{ trans(key='last_page', lang=lang) }}
          </a>
        </li>
      {% endif %}

      {% if paginator.next %}
        <li class="next pagbuttons">
          <a class="btn" href="{{ paginator.next }}" rel="next" aria-label="{{ trans(key='next_page', lang=lang) }}">
            {{ trans(key='next_page', lang=lang) }}
          </a>
        </li>
      {% endif %}
    </ul>
  </div>

  <style>
    /* 卡片容器 */
    .post {
      margin-bottom: 1rem;
    }

    .post-wrapper {
      background: #fff;
      border: 1px solid #eaeaea;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
    }

    /* 整个卡片作为链接 */
    .post-card-link {
      display: block;
      color: inherit;
      text-decoration: none;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
      border-radius: 12px;
      overflow: hidden;
    }

    .post-card-link:hover,
    .post-card-link:focus {
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      transform: translateY(-2px);
      outline: 2px solid #007acc; /* 可访问性焦点提示 */
      outline-offset: -2px;
    }

    /* 内容区 */
    .post-content-wrapper {
      padding: 1.2em;
    }

    .post-title {
      margin: 0 0 0.6em;
      font-size: 1.3em;
      font-weight: 600;
      color: #1a1a1a;
    }

    .post-excerpt p {
      margin: 0 0 1em;
      color: #555;
      line-height: 1.6;
      font-size: 0.95em;
    }

    /* 页脚样式 */
    .post-footer .meta {
      font-size: 0.85em;
      color: #777;
    }

    .meta-item i {
      margin-right: 4px;
      color: #888;
    }

    .tag {
      display: inline-block;
      background: #eef2f7;
      color: #4a7ebc;
      border-radius: 6px;
      padding: 0.15em 0.5em;
      margin-right: 0.4em;
      font-size: 0.8em;
    }

    /* 移动端优化：更大的点击区域和字体 */
    @media (max-width: 768px) {
      .post-content-wrapper {
        padding: 1em;
      }

      .post-title {
        font-size: 1.2em;
        margin-bottom: 0.5em;
      }

      .post-excerpt p {
        font-size: 0.9em;
        line-height: 1.5;
      }

      .post-card-link:hover {
        transform: none; /* 移除移动设备上的悬停动画 */
      }

      /* 确保最小点击区域符合 WCAG 规范（至少 44x44px） */
      .post-wrapper {
        min-height: 60px;
      }
    }
  </style>
{% endblock content %}